# 🤖 AI 分類系統使用指南

## 📋 **系統概述**

AI 分類系統是一個強大的文本自動分類工具，支持多種 AI 提供商，可以根據預設的規則和提示詞對文本進行智能分類。系統具備以下特點：

- 🎯 **精確分類**: 使用先進的 AI 模型進行文本分析
- ⚙️ **靈活配置**: 支持自定義分類規則和提示詞
- 🔄 **批量處理**: 支持單個和批量文本分類
- 📊 **詳細統計**: 提供完整的分類統計和分析報告
- 🔒 **安全可靠**: API 金鑰加密存儲，權限控制

---

## 🚀 **快速開始**

### 第一步：配置 AI 提供商

1. **進入 API 配置頁面**
   - 訪問：`/admin/classification/api-config`
   - 需要管理員權限

2. **添加 AI 提供商**
   - 點擊「+ 新增配置」
   - 選擇提供商類型（OpenAI、Claude、Gemini）
   - 填寫必要信息：

   ```
   配置名稱: 例如 "OpenAI GPT-3.5"
   API 金鑰: sk-xxxxxxxxxxxxxxxxx
   API 端點: https://api.openai.com/v1
   模型: gpt-3.5-turbo
   ```

3. **測試連接**
   - 點擊「測試連接」確保配置正確
   - 系統會驗證 API 金鑰和連接狀態

### 第二步：創建分類規則

1. **進入分類管理頁面**
   - 訪問：`/admin/classification`
   - 切換到「規則設定」標籤

2. **添加分類規則**
   - 點擊「+ 新增規則」
   - 填寫規則信息：

   ```
   規則名稱: 例如 "新聞分類"
   描述: 對新聞文章進行主題分類
   提示詞: 請根據以下文本內容，將其分類為以下類別之一：
           [政治, 經濟, 科技, 娛樂, 體育]
           
           文本內容：{text}
           
           請回答分類結果，格式：分類名稱
   ```

3. **配置參數**
   ```
   溫度: 0.3 (較低溫度確保一致性)
   最大字符: 1000
   優先級: 1 (數字越小優先級越高)
   ```

### 第三步：執行分類

1. **進入分類執行頁面**
   - 訪問：`/admin/classification/classify`

2. **選擇配置**
   - 選擇分類規則
   - 選擇 AI 提供商

3. **輸入文本**
   - **單個分類**: 直接輸入文本
   - **批量分類**: 每行一個文本

4. **執行分類**
   - 點擊「🚀 開始分類」
   - 等待處理完成
   - 查看分類結果和統計信息

---

## 🔧 **詳細配置指南**

### AI 提供商配置

#### OpenAI 配置
```javascript
{
  provider: "openai",
  name: "OpenAI GPT-3.5",
  apiKey: "sk-xxxxxxxxxxxxxxxxx",
  baseURL: "https://api.openai.com/v1",
  model: "gpt-3.5-turbo",
  maxTokens: 4000,
  temperature: 0.7,
  rateLimitPerMinute: 60,
  costPerToken: 0.00002
}
```

#### Claude 配置
```javascript
{
  provider: "claude",
  name: "Claude Sonnet",
  apiKey: "sk-ant-xxxxxxxxxxxxxxxxx",
  baseURL: "https://api.anthropic.com/v1",
  model: "claude-3-sonnet-20240229",
  maxTokens: 4000,
  temperature: 0.7,
  rateLimitPerMinute: 50,
  costPerToken: 0.00003
}
```

#### Gemini 配置
```javascript
{
  provider: "gemini",
  name: "Gemini Pro",
  apiKey: "AIzaSyxxxxxxxxxxxxxxxxx",
  baseURL: "https://generativelanguage.googleapis.com/v1",
  model: "gemini-pro",
  maxTokens: 4000,
  temperature: 0.7,
  rateLimitPerMinute: 60,
  costPerToken: 0.000001
}
```

### 分類規則設計

#### 1. 新聞分類規則
```
名稱: 新聞主題分類
描述: 將新聞文章分類為不同主題
分類選項: [政治, 經濟, 科技, 娛樂, 體育, 社會, 國際]

提示詞:
請仔細閱讀以下新聞文本，並將其分類為以下類別之一：

類別說明：
- 政治：政府政策、選舉、政治人物相關
- 經濟：市場、股票、企業、金融相關
- 科技：技術創新、數位產品、AI、科學研究
- 娛樂：電影、音樂、明星、綜藝節目
- 體育：各種運動賽事、運動員、體育新聞
- 社會：社會事件、民生議題、教育、醫療
- 國際：國外新聞、國際關係、全球事件

文本內容：
{text}

請只回答分類名稱，不要包含其他內容。
```

#### 2. 情感分析規則
```
名稱: 情感分析
描述: 分析文本的情感傾向
分類選項: [正面, 負面, 中性]

提示詞:
請分析以下文本的情感傾向，並分類為以下三個類別之一：

- 正面：表達積極、樂觀、讚美的情感
- 負面：表達消極、悲觀、批評的情感  
- 中性：客觀陳述，沒有明顯情感傾向

文本內容：
{text}

請只回答分類名稱：正面、負面或中性。
```

#### 3. 產品評論分類
```
名稱: 產品評論分類
描述: 將產品評論按照評價等級分類
分類選項: [非常滿意, 滿意, 普通, 不滿意, 非常不滿意]

提示詞:
請根據以下產品評論的內容，判斷顧客的滿意度等級：

評級標準：
- 非常滿意：極度讚美，強烈推薦
- 滿意：總體正面，有推薦意願
- 普通：中性評價，有優缺點
- 不滿意：總體負面，不推薦
- 非常不滿意：極度不滿，強烈批評

評論內容：
{text}

請只回答滿意度等級。
```

---

## 📊 **統計和分析**

### 查看統計報告

1. **訪問統計頁面**
   - 進入 `/admin/classification`
   - 切換到「統計報告」標籤

2. **統計指標包括**
   - 總任務數
   - 成功率
   - 總成本
   - 平均處理時間
   - 分類分佈
   - 規則效能
   - 提供商使用情況

### 導出分類結果

1. **單次結果導出**
   - 在分類結果頁面點擊「📊 導出結果」
   - 自動下載 CSV 格式文件

2. **批量結果導出**
   - 包含所有分類項目的詳細信息
   - 統計數據和成本分析

---

## 🔒 **安全和權限**

### API 金鑰安全

- ✅ **加密存儲**: API 金鑰使用加密方式存儲
- ✅ **權限控制**: 只有管理員可以查看和修改配置
- ✅ **連接測試**: 提供安全的連接測試功能
- ✅ **使用監控**: 追蹤 API 使用量和成本

### 訪問權限

- **管理員**: 完整的系統配置和管理權限
- **代理**: 可以執行分類，查看結果
- **用戶**: 基本的分類功能使用權限

---

## 💡 **最佳實踐**

### 1. 提示詞設計

**✅ 好的提示詞特徵:**
- 明確的分類標準
- 具體的類別說明
- 清晰的輸出格式要求
- 適當的上下文信息

**❌ 避免的問題:**
- 模糊的分類標準
- 過於複雜的指令
- 缺少輸出格式說明
- 分類選項過多

### 2. 參數調優

**溫度設定建議:**
- `0.1-0.3`: 需要一致性的分類任務
- `0.4-0.7`: 平衡創造性和一致性
- `0.8-1.0`: 需要創造性的分類任務

**Token 限制:**
- 短文本: 500-1000 tokens
- 中等文本: 1000-2000 tokens  
- 長文本: 2000-4000 tokens

### 3. 成本控制

**節省成本的方法:**
- 選擇合適的模型（不一定要最貴的）
- 優化提示詞長度
- 批量處理以提高效率
- 監控使用量和成本

---

## 🛠️ **故障排除**

### 常見問題

#### 1. API 連接失敗
**可能原因:**
- API 金鑰錯誤或過期
- 網絡連接問題
- API 端點 URL 錯誤
- 超出速率限制

**解決方案:**
- 驗證 API 金鑰是否正確
- 檢查網絡連接
- 確認 API 端點 URL
- 調整速率限制設定

#### 2. 分類結果不準確
**可能原因:**
- 提示詞設計不當
- 分類標準不明確
- 訓練數據不足
- 溫度參數設置不當

**解決方案:**
- 重新設計提示詞
- 提供更多示例
- 調整溫度參數
- 增加分類標準說明

#### 3. 處理速度慢
**可能原因:**
- API 響應延遲
- 批量處理量過大
- 網絡延遲
- 模型處理能力限制

**解決方案:**
- 選擇更快的模型
- 減少批量處理大小
- 優化網絡連接
- 考慮使用多個提供商

---

## 📞 **技術支援**

### 聯繫方式
- 📧 **技術支援**: 通過系統內建的反饋功能
- 📚 **文檔**: 查看系統內的幫助文檔
- 🔧 **故障報告**: 在管理後台提交故障報告

### 系統維護
- 🔄 **定期備份**: 系統會自動備份配置和數據
- 📊 **性能監控**: 實時監控系統性能和使用情況
- 🛡️ **安全更新**: 定期更新安全補丁

---

**最後更新**: 2025-12-28  
**版本**: 1.0.0  
**系統狀態**: ✅ 正常運行
