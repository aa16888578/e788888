{"fsPath":"/home/a0928997578_gmail_com/å‰å¤§/ARCHITECTURE_BLUEPRINT.md","fileUuid":"90f1003d-34a6-4369-937a-b8b416bade6c","fileSizeBytes":38116,"numLines":1686,"diffChanges":[{"originalStartLineNumberOneIndexed":1435,"originalEndLineNumberExclusiveOneIndexed":1435,"modifiedStartLineNumberOneIndexed":1435,"modifiedEndLineNumberExclusiveOneIndexed":1626,"addedLines":["","---","","## ğŸŒ **ç’°å¢ƒé…ç½®èˆ‡éƒ¨ç½²æŒ‡å— (Environment Configuration & Deployment Guide)**","","### **ğŸ“‹ ç’°å¢ƒé…ç½®æ–‡ä»¶**","æœ¬é …ç›®åŒ…å«å®Œæ•´çš„ç’°å¢ƒé…ç½®ç¯„ä¾‹å’Œèªªæ˜æ–‡æª”ï¼š","","#### **1. ç’°å¢ƒè®Šæ•¸ç¯„ä¾‹æ–‡ä»¶**","- **æ–‡ä»¶è·¯å¾‘**: `env.example`","- **ç”¨é€”**: åŒ…å«æ‰€æœ‰å¿…è¦çš„ç’°å¢ƒè®Šæ•¸é…ç½®","- **ä½¿ç”¨æ–¹æ³•**: è¤‡è£½ç‚º `.env` ä¸¦å¡«å…¥å¯¦éš›å€¼","","#### **2. ç’°å¢ƒé…ç½®èªªæ˜æ–‡æª”**","- **æ–‡ä»¶è·¯å¾‘**: `ENVIRONMENT_SETUP.md`","- **å…§å®¹**: è©³ç´°çš„é…ç½®èªªæ˜ã€æ•…éšœæ’é™¤å’Œæœ€ä½³å¯¦è¸","","### **ğŸš€ å¿«é€Ÿé…ç½®æ­¥é©Ÿ**","","#### **æ­¥é©Ÿ 1: è¤‡è£½ç’°å¢ƒé…ç½®**","```bash","cd /home/a0928997578_gmail_com/å‰å¤§","cp env.example .env","```","","#### **æ­¥é©Ÿ 2: ç·¨è¼¯é…ç½®æ–‡ä»¶**","æ ¹æ“šå¯¦éš›æƒ…æ³ç·¨è¼¯ `.env` æ–‡ä»¶ä¸­çš„é…ç½®å€¼ã€‚","","#### **æ­¥é©Ÿ 3: é‡å•Ÿæœå‹™**","é…ç½®å®Œæˆå¾Œé‡å•Ÿç›¸é—œæœå‹™ä½¿é…ç½®ç”Ÿæ•ˆã€‚","","### **ğŸ”‘ æ ¸å¿ƒé…ç½®é …**","","#### **Firebase é…ç½® (å¿…éœ€)**","```bash","FIREBASE_PROJECT_ID=your-project-id","FIREBASE_PRIVATE_KEY=\"-----BEGIN PRIVATE KEY-----\\nYour Private Key Here\\n-----END PRIVATE KEY-----\\n\"","FIREBASE_CLIENT_EMAIL=firebase-adminsdk-xxxxx@your-project-id.iam.gserviceaccount.com","```","","#### **Telegram Bot é…ç½® (å¿…éœ€)**","```bash","TELEGRAM_BOT_TOKEN=your-telegram-bot-token","TELEGRAM_WEBHOOK_SECRET=your-webhook-secret","TELEGRAM_WEBHOOK_URL=https://your-project-id.cloudfunctions.net/telegramWebhook","```","","#### **æ”¯ä»˜ç³»çµ±é…ç½® (å¿…éœ€)**","```bash","TRON_WALLET_ADDRESS=TYourTronWalletAddressHere","ETHEREUM_WALLET_ADDRESS=0xYourEthereumWalletAddressHere","SYSTEM_WALLET_ADDRESS=TYourSystemWalletAddressHere","```","","#### **å®‰å…¨é…ç½® (å¿…éœ€)**","```bash","JWT_SECRET=your-jwt-secret-key-here","JWT_EXPIRES_IN=24h","ALLOWED_ORIGINS=https://your-domain.com","```","","### **ğŸ“š é…ç½®æ–‡æª”çµæ§‹**","","```","å‰å¤§/","â”œâ”€â”€ env.example              # ç’°å¢ƒè®Šæ•¸ç¯„ä¾‹","â”œâ”€â”€ ENVIRONMENT_SETUP.md     # ç’°å¢ƒé…ç½®èªªæ˜","â”œâ”€â”€ WORK_PROGRESS.md         # å·¥ä½œé€²åº¦å ±å‘Š","â”œâ”€â”€ ARCHITECTURE_BLUEPRINT.md # ç³»çµ±æ¶æ§‹è—åœ–","â””â”€â”€ functions/               # å¾Œç«¯ä»£ç¢¼","    â”œâ”€â”€ src/","    â”‚   â”œâ”€â”€ services/        # æœå‹™å±¤","    â”‚   â”œâ”€â”€ types/           # é¡å‹å®šç¾©","    â”‚   â””â”€â”€ routes/          # API è·¯ç”±","    â””â”€â”€ package.json         # ä¾è³´é…ç½®","```","","### **ğŸ”§ é–‹ç™¼ç’°å¢ƒè¨­ç½®**","","#### **1. å®‰è£ä¾è³´**","```bash","cd functions","npm install","```","","#### **2. ç·¨è­¯ TypeScript**","```bash","npm run build","```","","#### **3. æœ¬åœ°æ¸¬è©¦**","```bash","npm run dev","```","","#### **4. éƒ¨ç½²åˆ° Firebase**","```bash","firebase deploy --only functions","```","","### **ğŸ“± Telegram Bot è¨­ç½®**","","#### **1. å‰µå»º Bot**","1. åœ¨ Telegram ä¸­æœç´¢ `@BotFather`","2. ç™¼é€ `/newbot` å‘½ä»¤","3. è¨­ç½® Bot åç¨±å’Œç”¨æˆ¶å","4. ç²å– Bot Token","","#### **2. è¨­ç½® Webhook**","```bash","curl -F \"url=https://your-project-id.cloudfunctions.net/telegramWebhook\" \\","     https://api.telegram.org/bot<BOT_TOKEN>/setWebhook","```","","### **ğŸ’° æ”¯ä»˜ç³»çµ±é…ç½®**","","#### **1. USDT-TRC20 é…ç½®**","- ç²å– Tron éŒ¢åŒ…åœ°å€","- é…ç½® Tron API å¯†é‘°","- è¨­ç½®ç¢ºèªæ•¸ (å»ºè­° 20)","","#### **2. åŒ¯ç‡ API é…ç½®**","- CoinGecko API (å…è²»ï¼Œæ¨è–¦)","- Binance API (å‚™ç”¨)","","### **ğŸ”’ å®‰å…¨æ³¨æ„äº‹é …**","","#### **1. ç’°å¢ƒè®Šæ•¸ä¿è­·**","- æ°¸é ä¸è¦å°‡ `.env` æ–‡ä»¶æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶","- ä½¿ç”¨å¼·å¯†é‘°å’Œå¯†ç¢¼","- å®šæœŸæ›´æ› API å¯†é‘°","","#### **2. æ¬Šé™ç®¡ç†**","- é™åˆ¶ API å¯†é‘°çš„æ¬Šé™ç¯„åœ","- ä½¿ç”¨å°ˆç”¨çš„æœå‹™å¸³æˆ¶","- å•Ÿç”¨å®‰å…¨æ—¥èªŒè¨˜éŒ„","","### **ğŸ“Š ç›£æ§å’Œç¶­è­·**","","#### **1. æ€§èƒ½ç›£æ§**","```bash","ENABLE_PERFORMANCE_MONITORING=true","ENABLE_ERROR_TRACKING=true","ENABLE_ANALYTICS=true","```","","#### **2. æ—¥èªŒé…ç½®**","```bash","LOG_LEVEL=info","LOG_FILE_PATH=./logs/app.log","```","","#### **3. å‚™ä»½é…ç½®**","```bash","ENABLE_AUTO_BACKUP=true","BACKUP_FREQUENCY_HOURS=24","BACKUP_RETENTION_DAYS=30","```","","### **ğŸš¨ æ•…éšœæ’é™¤**","","#### **å¸¸è¦‹å•é¡Œè§£æ±º**","","1. **Firebase é€£æ¥å¤±æ•—**","   - æª¢æŸ¥é …ç›® ID å’Œæœå‹™å¸³æˆ¶æ¬Šé™","   - ç¢ºèªç¶²çµ¡é€£æ¥","","2. **Telegram Bot ç„¡éŸ¿æ‡‰**","   - æª¢æŸ¥ Bot Token å’Œ Webhook è¨­ç½®","   - ç¢ºèªå‡½æ•¸éƒ¨ç½²ç‹€æ…‹","","3. **æ”¯ä»˜ç³»çµ±éŒ¯èª¤**","   - æª¢æŸ¥éŒ¢åŒ…åœ°å€æ ¼å¼","   - ç¢ºèªç¶²çµ¡é…ç½®å’Œ API å¯†é‘°","","4. **ç’°å¢ƒè®Šæ•¸æœªç”Ÿæ•ˆ**","   - é‡å•Ÿç›¸é—œæœå‹™","   - æª¢æŸ¥è®Šæ•¸åç¨±æ‹¼å¯«","","### **ğŸ“ æŠ€è¡“æ”¯æŒ**","","#### **æ–‡æª”è³‡æº**","- [Firebase æ–‡æª”](https://firebase.google.com/docs)","- [Telegram Bot API](https://core.telegram.org/bots/api)","- [Tron é–‹ç™¼æ–‡æª”](https://developers.tron.network/)","- [Ethereum é–‹ç™¼æ–‡æª”](https://ethereum.org/developers/)","","#### **é …ç›®æ–‡æª”**","- `ENVIRONMENT_SETUP.md` - è©³ç´°é…ç½®èªªæ˜","- `WORK_PROGRESS.md` - é–‹ç™¼é€²åº¦å’Œç‹€æ…‹","- `ARCHITECTURE_BLUEPRINT.md` - ç³»çµ±æ¶æ§‹è¨­è¨ˆ"],"tokenizedAddedLines":[2,5,2,1001029,2,1001030,1001031,2,1001032,1001033,1001034,1001035,2,1001036,1001037,1001038,2,1001039,2,1001040,339,1001041,1001042,50,2,1001043,1001044,2,1001045,1001046,2,1001047,2,1001048,339,1001049,1001050,1001051,50,2,1001052,339,1001053,1001054,1001055,50,2,1001056,339,1001057,1001058,1001059,50,2,1001060,339,1001061,1001062,1001063,50,2,1001064,2,50,1001065,1001066,1001067,1001068,1001069,1001070,1001071,1001072,1001073,1001074,1001075,50,2,1001076,2,1001077,339,1001078,1001079,50,2,1001080,339,1001081,50,2,1001082,339,1001083,50,2,1001084,339,1001085,50,2,1001086,2,1001087,1001088,1001089,1001090,1001091,2,1001092,339,1001093,345,50,2,1001094,2,1001095,1001096,1001097,1001098,2,1001099,1001100,1001101,2,1001102,2,1001103,1001104,1001105,1001106,2,1001107,1001108,1001109,1001110,2,1001111,2,1001112,339,1001113,1001114,1001115,50,2,1001116,339,1001117,1001118,50,2,1001119,339,1001120,1001121,1001122,50,2,1001123,2,1001124,2,1001125,1001126,1001127,2,1001128,1001129,1001130,2,1001131,1001132,1001133,2,1001134,1001135,1001136,2,1001137,2,1001138,1001139,1001140,1001141,1001142,2,1001143,1001144,1001145,1001146]},{"originalStartLineNumberOneIndexed":1440,"originalEndLineNumberExclusiveOneIndexed":1441,"modifiedStartLineNumberOneIndexed":1631,"modifiedEndLineNumberExclusiveOneIndexed":1632,"addedLines":["### **ç¬¬ä¸€éšæ®µï¼šåŸºç¤æ¶æ§‹** ğŸ—ï¸ âœ…"],"tokenizedAddedLines":[1001147]},{"originalStartLineNumberOneIndexed":1442,"originalEndLineNumberExclusiveOneIndexed":1451,"modifiedStartLineNumberOneIndexed":1633,"modifiedEndLineNumberExclusiveOneIndexed":1644,"addedLines":["- [x] æ•¸æ“šåº«è¨­è¨ˆå’Œçµæ§‹ (åŸºæ–¼ Telegram ç”¨æˆ¶)","- [x] åŸºç¤ API æ¶æ§‹","- [x] Telegram ç”¨æˆ¶èªè­‰ç³»çµ±","","### **ç¬¬äºŒéšæ®µï¼šTelegram Bot** ğŸ¤– âœ…","- [x] Bot åŸºç¤åŠŸèƒ½","- [x] å•†å“æŸ¥è©¢åŠŸèƒ½","- [x] è³¼ç‰©è»Šç®¡ç†","- [x] è¨‚å–®è™•ç†","- [x] æ”¯ä»˜é›†æˆæ¸¬è©¦","- [x] Bot å‘½ä»¤æ“´å±•"],"tokenizedAddedLines":[1001148,1001149,1001150,2,1001151,1001152,1001153,1001154,1001155,1001156,1001157]},{"originalStartLineNumberOneIndexed":1486,"originalEndLineNumberExclusiveOneIndexed":1487,"modifiedStartLineNumberOneIndexed":1679,"modifiedEndLineNumberExclusiveOneIndexed":1680,"addedLines":["**æ¶æ§‹ç‹€æ…‹**: ç¬¬äºŒéšæ®µå®Œæˆï¼ŒåŒ…å«å®Œæ•´çš„ Telegram Bot åŠŸèƒ½ ğŸš€  "],"tokenizedAddedLines":[1001158]},{"originalStartLineNumberOneIndexed":1488,"originalEndLineNumberExclusiveOneIndexed":1489,"modifiedStartLineNumberOneIndexed":1681,"modifiedEndLineNumberExclusiveOneIndexed":1682,"addedLines":["**ç‰ˆæœ¬**: 2.2.0 - å¤šå¹³å°ç‰ˆæœ¬ + ä»£ç†ç³»çµ± + USDT-TRC20 æ”¯ä»˜ + ç’°å¢ƒé…ç½®æŒ‡å—  "],"tokenizedAddedLines":[1001159]},{"originalStartLineNumberOneIndexed":1491,"originalEndLineNumberExclusiveOneIndexed":1491,"modifiedStartLineNumberOneIndexed":1684,"modifiedEndLineNumberExclusiveOneIndexed":1686,"addedLines":["","**ç’°å¢ƒé…ç½®å·²å®Œæˆï¼Œä¸‹ä¸€ä½é–‹ç™¼è€…å¯ä»¥ç›´æ¥ä½¿ç”¨ `env.example` å’Œ `ENVIRONMENT_SETUP.md` é€²è¡Œç³»çµ±é…ç½®å’Œéƒ¨ç½²ã€‚**"],"tokenizedAddedLines":[2,1001160]}],"gitInfo":{"noRepoFound":true},"kind":"KIND_MODIFIED"}