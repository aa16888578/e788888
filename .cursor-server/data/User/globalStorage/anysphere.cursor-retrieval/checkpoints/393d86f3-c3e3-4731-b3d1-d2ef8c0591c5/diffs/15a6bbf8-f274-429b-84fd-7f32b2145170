{"fsPath":"/home/a0928997578_gmail_com/偉大/scripts/stop.sh","fileUuid":"15a6bbf8-f274-429b-84fd-7f32b2145170","fileSizeBytes":2669,"numLines":134,"diffChanges":[{"originalStartLineNumberOneIndexed":1,"originalEndLineNumberExclusiveOneIndexed":1,"modifiedStartLineNumberOneIndexed":1,"modifiedEndLineNumberExclusiveOneIndexed":135,"addedLines":["#!/bin/bash","","# ========================================","# ShopBot 多平台電商系統 - 停止服務腳本","# ========================================","","# 顏色定義","RED='\\033[0;31m'","GREEN='\\033[0;32m'","YELLOW='\\033[1;33m'","BLUE='\\033[0;34m'","NC='\\033[0m' # No Color","","# 日誌函數","log_info() {","    echo -e \"${BLUE}[INFO]${NC} $1\"","}","","log_success() {","    echo -e \"${GREEN}[SUCCESS]${NC} $1\"","}","","log_warning() {","    echo -e \"${YELLOW}[WARNING]${NC} $1\"","}","","log_error() {","    echo -e \"${RED}[ERROR]${NC} $1\"","}","","# 停止管理後台","stop_admin() {","    if [ -f \"logs/admin.pid\" ]; then","        ADMIN_PID=$(cat logs/admin.pid)","        if kill -0 $ADMIN_PID 2>/dev/null; then","            kill $ADMIN_PID","            log_success \"已停止管理後台 (PID: $ADMIN_PID)\"","        else","            log_warning \"管理後台進程不存在 (PID: $ADMIN_PID)\"","        fi","        rm -f logs/admin.pid","    else","        log_info \"管理後台未運行\"","    fi","}","","# 停止 MiniWeb","stop_web() {","    if [ -f \"logs/web.pid\" ]; then","        WEB_PID=$(cat logs/web.pid)","        if kill -0 $WEB_PID 2>/dev/null; then","            kill $WEB_PID","            log_success \"已停止 MiniWeb (PID: $WEB_PID)\"","        else","            log_warning \"MiniWeb 進程不存在 (PID: $WEB_PID)\"","        fi","        rm -f logs/web.pid","    else","        log_info \"MiniWeb 未運行\"","    fi","}","","# 停止後端服務","stop_functions() {","    if [ -f \"logs/functions.pid\" ]; then","        FUNCTIONS_PID=$(cat logs/functions.pid)","        if kill -0 $FUNCTIONS_PID 2>/dev/null; then","            kill $FUNCTIONS_PID","            log_success \"已停止後端服務 (PID: $FUNCTIONS_PID)\"","        else","            log_warning \"後端服務進程不存在 (PID: $FUNCTIONS_PID)\"","        fi","        rm -f logs/functions.pid","    else","        log_info \"後端服務未運行\"","    fi","}","","# 強制停止所有 Node.js 進程","force_stop_all() {","    log_info \"強制停止所有 Node.js 進程...\"","    ","    # 查找並停止所有在項目目錄下運行的 Node.js 進程","    pids=$(ps aux | grep \"node.*dev\" | grep -v grep | awk '{print $2}')","    ","    if [ -n \"$pids\" ]; then","        echo \"$pids\" | xargs kill -9","        log_success \"已強制停止所有 Node.js 進程\"","    else","        log_info \"沒有找到運行中的 Node.js 進程\"","    fi","}","","# 清理日誌文件","cleanup_logs() {","    log_info \"清理日誌文件...\"","    ","    if [ -d \"logs\" ]; then","        rm -f logs/*.pid","        log_success \"已清理進程 ID 文件\"","    fi","}","","# 主函數","main() {","    echo \"========================================\"","    echo \"🛑 ShopBot 多平台電商系統 - 停止服務\"","    echo \"========================================\"","    echo \"\"","    ","    # 停止各個服務","    stop_admin","    stop_web","    stop_functions","    ","    # 強制停止所有進程","    force_stop_all","    ","    # 清理日誌","    cleanup_logs","    ","    echo \"\"","    log_success \"所有服務已停止！\"","    echo \"\"","    echo \"💡 提示：\"","    echo \"   • 重新啟動: npm run dev\"","    echo \"   • 查看狀態: npm run status\"","    echo \"   • 查看日誌: npm run logs\"","    echo \"\"","}","","# 執行主函數","main \"$@\"",""],"tokenizedAddedLines":[1000000,1000001,1000002,1000003,1000002,1000001,1000004,1000005,1000006,1000007,1000008,1000009,1000001,1000010,1000011,1000012,1000013,1000001,1000014,1000015,1000013,1000001,1000016,1000017,1000013,1000001,1000018,1000019,1000013,1000001,1000020,1000021,1000022,1000023,1000024,1000025,1000026,1000027,1000028,1000029,1000030,1000031,1000032,1000033,1000013,1000001,1000034,1000035,1000036,1000037,1000038,1000039,1000040,1000027,1000041,1000029,1000042,1000031,1000043,1000033,1000013,1000001,1000044,1000045,1000046,1000047,1000048,1000049,1000050,1000027,1000051,1000029,1000052,1000031,1000053,1000033,1000013,1000001,1000054,1000055,1000056,1000057,1000058,1000059,1000057,1000060,1000061,1000062,1000031,1000063,1000033,1000013,1000001,1000064,1000065,1000066,1000057,1000067,1000068,1000069,1000033,1000013,1000001,1000070,1000071,1000072,1000073,1000072,1000074,1000057,1000075,1000076,1000077,1000078,1000057,1000079,1000080,1000057,1000081,1000082,1000057,1000074,1000083,1000074,1000084,1000085,1000086,1000087,1000074,1000013,1000001,1000088,1000089,1000001]}],"gitInfo":{"gitInfo":{"gitRoot":"/home/a0928997578_gmail_com"}},"kind":"KIND_ADDED"}