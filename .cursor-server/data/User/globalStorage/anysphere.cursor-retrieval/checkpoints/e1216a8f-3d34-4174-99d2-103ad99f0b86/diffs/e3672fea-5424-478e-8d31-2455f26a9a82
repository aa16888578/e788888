{"fsPath":"/home/a0928997578_gmail_com/偉大/admin/src/components/ExchangeRateManagement.tsx","fileUuid":"e3672fea-5424-478e-8d31-2455f26a9a82","fileSizeBytes":10792,"numLines":312,"diffChanges":[{"originalStartLineNumberOneIndexed":1,"originalEndLineNumberExclusiveOneIndexed":1,"modifiedStartLineNumberOneIndexed":1,"modifiedEndLineNumberExclusiveOneIndexed":313,"addedLines":["'use client';","","import { useState, useEffect } from 'react';","import { ","  CurrencyDollarIcon, ","  ArrowTrendingUpIcon,","  ArrowTrendingDownIcon,","  ClockIcon,","  RefreshIcon","} from '@heroicons/react/24/outline';","import { formatCurrency } from '@/lib/utils';","","interface ExchangeRate {","  id: string;","  fromCurrency: string;","  toCurrency: string;","  rate: number;","  change24h: number;","  lastUpdate: Date;","  source: string;","}","","const mockExchangeRates: ExchangeRate[] = [","  {","    id: '1',","    fromCurrency: 'USDT',","    toCurrency: 'USD',","    rate: 1.00,","    change24h: 0.00,","    lastUpdate: new Date(),","    source: 'Chainlink'","  },","  {","    id: '2',","    fromCurrency: 'USDT',","    toCurrency: 'CNY',","    rate: 7.25,","    change24h: -0.02,","    lastUpdate: new Date(),","    source: 'Chainlink'","  },","  {","    id: '3',","    fromCurrency: 'USDT',","    toCurrency: 'TWD',","    rate: 31.50,","    change24h: 0.15,","    lastUpdate: new Date(),","    source: 'Chainlink'","  },","  {","    id: '4',","    fromCurrency: 'USDT',","    toCurrency: 'EUR',","    rate: 0.92,","    change24h: -0.01,","    lastUpdate: new Date(),","    source: 'Chainlink'","  },","  {","    id: '5',","    fromCurrency: 'USDT',","    toCurrency: 'JPY',","    rate: 150.25,","    change24h: 0.50,","    lastUpdate: new Date(),","    source: 'Chainlink'","  }","];","","export default function ExchangeRateManagement() {","  const [exchangeRates, setExchangeRates] = useState<ExchangeRate[]>(mockExchangeRates);","  const [isRefreshing, setIsRefreshing] = useState(false);","  const [selectedCurrency, setSelectedCurrency] = useState('USD');","","  const refreshRates = async () => {","    setIsRefreshing(true);","    // 模擬 API 調用","    await new Promise(resolve => setTimeout(resolve, 1000));","    ","    // 模擬匯率變化","    const updatedRates = exchangeRates.map(rate => ({","      ...rate,","      rate: rate.rate + (Math.random() - 0.5) * 0.01,","      change24h: rate.change24h + (Math.random() - 0.5) * 0.1,","      lastUpdate: new Date()","    }));","    ","    setExchangeRates(updatedRates);","    setIsRefreshing(false);","  };","","  const getChangeColor = (change: number) => {","    if (change > 0) return 'text-green-600';","    if (change < 0) return 'text-red-600';","    return 'text-gray-600';","  };","","  const getChangeIcon = (change: number) => {","    if (change > 0) return <ArrowTrendingUpIcon className=\"h-4 w-4 text-green-600\" />;","    if (change < 0) return <ArrowTrendingDownIcon className=\"h-4 w-4 text-red-600\" />;","    return null;","  };","","  const formatChange = (change: number) => {","    const sign = change > 0 ? '+' : '';","    return `${sign}${change.toFixed(4)}`;","  };","","  const convertAmount = (amount: number, fromCurrency: string, toCurrency: string) => {","    if (fromCurrency === toCurrency) return amount;","    ","    const rate = exchangeRates.find(r => ","      r.fromCurrency === fromCurrency && r.toCurrency === toCurrency","    );","    ","    return rate ? amount * rate.rate : amount;","  };","","  return (","    <div className=\"space-y-6\">","      {/* 頁面標題 */}","      <div>","        <h1 className=\"text-2xl font-bold text-gray-900\">匯率管理</h1>","        <p className=\"mt-2 text-sm text-gray-600\">","          監控和管理 USDT 對各國貨幣的匯率，支持實時更新和歷史追蹤","        </p>","      </div>","","      {/* 匯率概覽 */}","      <div className=\"bg-white overflow-hidden shadow rounded-lg\">","        <div className=\"p-6\">","          <div className=\"flex items-center justify-between mb-4\">","            <h3 className=\"text-lg font-medium text-gray-900\">當前匯率</h3>","            <button","              onClick={refreshRates}","              disabled={isRefreshing}","              className=\"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 transition-colors\"","            >","              <RefreshIcon className={`h-4 w-4 mr-2 ${isRefreshing ? 'animate-spin' : ''}`} />","              {isRefreshing ? '更新中...' : '刷新匯率'}","            </button>","          </div>","","          <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3\">","            {exchangeRates.map((rate) => (","              <div key={rate.id} className=\"border border-gray-200 rounded-lg p-4\">","                <div className=\"flex items-center justify-between mb-2\">","                  <div className=\"flex items-center space-x-2\">","                    <CurrencyDollarIcon className=\"h-5 w-5 text-gray-400\" />","                    <span className=\"text-sm font-medium text-gray-900\">","                      {rate.fromCurrency}/{rate.toCurrency}","                    </span>","                  </div>","                  <span className=\"text-xs text-gray-500\">{rate.source}</span>","                </div>","                ","                <div className=\"text-2xl font-bold text-gray-900 mb-2\">","                  {rate.rate.toFixed(4)}","                </div>","                ","                <div className=\"flex items-center justify-between\">","                  <div className=\"flex items-center space-x-1\">","                    {getChangeIcon(rate.change24h)}","                    <span className={`text-sm ${getChangeColor(rate.change24h)}`}>","                      {formatChange(rate.change24h)}","                    </span>","                  </div>","                  <div className=\"flex items-center space-x-1 text-xs text-gray-500\">","                    <ClockIcon className=\"h-3 w-3\" />","                    <span>{rate.lastUpdate.toLocaleTimeString()}</span>","                  </div>","                </div>","              </div>","            ))}","          </div>","        </div>","      </div>","","      {/* 匯率轉換器 */}","      <div className=\"bg-white shadow rounded-lg\">","        <div className=\"px-4 py-5 sm:p-6\">","          <h3 className=\"text-lg font-medium text-gray-900 mb-4\">匯率轉換器</h3>","          <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-3\">","            <div>","              <label className=\"block text-sm font-medium text-gray-700 mb-2\">","                金額","              </label>","              <input","                type=\"number\"","                placeholder=\"輸入金額\"","                className=\"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm\"","              />","            </div>","            ","            <div>","              <label className=\"block text-sm font-medium text-gray-700 mb-2\">","                從","              </label>","              <select className=\"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm\">","                <option value=\"USDT\">USDT</option>","                <option value=\"USD\">USD</option>","                <option value=\"CNY\">CNY</option>","                <option value=\"TWD\">TWD</option>","              </select>","            </div>","            ","            <div>","              <label className=\"block text-sm font-medium text-gray-700 mb-2\">","                到","              </label>","              <select ","                value={selectedCurrency}","                onChange={(e) => setSelectedCurrency(e.target.value)}","                className=\"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm\"","              >","                <option value=\"USD\">USD</option>","                <option value=\"CNY\">CNY</option>","                <option value=\"TWD\">TWD</option>","                <option value=\"EUR\">EUR</option>","                <option value=\"JPY\">JPY</option>","              </select>","            </div>","          </div>","          ","          <div className=\"mt-4 p-4 bg-gray-50 rounded-lg\">","            <div className=\"text-center\">","              <p className=\"text-sm text-gray-500\">轉換結果</p>","              <p className=\"text-2xl font-bold text-gray-900\">","                {formatCurrency(100, selectedCurrency)}","              </p>","              <p className=\"text-sm text-gray-500\">","                100 USDT = {formatCurrency(100, selectedCurrency)}","              </p>","            </div>","          </div>","        </div>","      </div>","","      {/* 匯率歷史圖表 */}","      <div className=\"bg-white shadow rounded-lg\">","        <div className=\"px-4 py-5 sm:p-6\">","          <h3 className=\"text-lg font-medium text-gray-900 mb-4\">匯率趨勢</h3>","          <div className=\"h-64 bg-gray-50 rounded-lg flex items-center justify-center\">","            <div className=\"text-center\">","              <CurrencyDollarIcon className=\"h-12 w-12 text-gray-400 mx-auto mb-2\" />","              <p className=\"text-gray-500\">匯率圖表將在這裡顯示</p>","              <p className=\"text-sm text-gray-400\">支持 24小時、7天、30天趨勢</p>","            </div>","          </div>","        </div>","      </div>","","      {/* 匯率設置 */}","      <div className=\"bg-white shadow rounded-lg\">","        <div className=\"px-4 py-5 sm:p-6\">","          <h3 className=\"text-lg font-medium text-gray-900 mb-4\">匯率設置</h3>","          <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-2\">","            <div>","              <label className=\"block text-sm font-medium text-gray-700 mb-2\">","                更新頻率","              </label>","              <select className=\"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm\">","                <option value=\"1\">每 1 分鐘</option>","                <option value=\"5\">每 5 分鐘</option>","                <option value=\"15\">每 15 分鐘</option>","                <option value=\"30\">每 30 分鐘</option>","              </select>","            </div>","            ","            <div>","              <label className=\"block text-sm font-medium text-gray-700 mb-2\">","                數據源","              </label>","              <select className=\"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm\">","                <option value=\"chainlink\">Chainlink (主要)</option>","                <option value=\"coingecko\">CoinGecko (備用)</option>","                <option value=\"binance\">Binance (第三)</option>","              </select>","            </div>","            ","            <div>","              <label className=\"block text-sm font-medium text-gray-700 mb-2\">","                匯率預警","              </label>","              <input","                type=\"number\"","                placeholder=\"設置預警閾值\"","                className=\"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm\"","              />","            </div>","            ","            <div>","              <label className=\"block text-sm font-medium text-gray-700 mb-2\">","                自動同步","              </label>","              <div className=\"flex items-center\">","                <input","                  type=\"checkbox\"","                  defaultChecked","                  className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"","                />","                <span className=\"ml-2 text-sm text-gray-700\">啟用自動同步</span>","              </div>","            </div>","          </div>","        </div>","      </div>","    </div>","  );","}",""],"tokenizedAddedLines":[1000000,1000001,1000002,1000003,1000004,1000005,1000006,1000007,1000008,1000009,1000010,1000001,1000011,1000012,1000013,1000014,1000015,1000016,1000017,1000018,1000019,1000001,1000020,1000021,1000022,1000023,1000024,1000025,1000026,1000027,1000028,1000029,1000021,1000030,1000023,1000031,1000032,1000033,1000027,1000028,1000029,1000021,1000034,1000023,1000035,1000036,1000037,1000027,1000028,1000029,1000021,1000038,1000023,1000039,1000040,1000041,1000027,1000028,1000029,1000021,1000042,1000023,1000043,1000044,1000045,1000027,1000028,1000046,1000047,1000001,1000048,1000049,1000050,1000051,1000001,1000052,1000053,1000054,1000055,1000056,1000057,1000058,1000059,1000060,1000061,1000062,1000063,1000056,1000064,1000065,1000066,1000001,1000067,1000068,1000069,1000070,1000066,1000001,1000071,1000072,1000073,1000074,1000066,1000001,1000075,1000076,1000077,1000066,1000001,1000078,1000079,1000056,1000080,1000081,1000082,1000056,1000083,1000066,1000001,1000084,1000085,1000086,1000087,1000088,1000089,1000090,1000091,1000092,1000001,1000093,1000094,1000095,1000096,1000097,1000098,1000099,1000100,1000101,1000102,1000103,1000104,1000105,1000106,1000001,1000107,1000108,1000109,1000110,1000111,1000112,1000113,1000114,1000115,1000116,1000117,1000118,1000119,1000120,1000121,1000118,1000119,1000122,1000123,1000124,1000125,1000126,1000115,1000116,1000127,1000128,1000129,1000116,1000118,1000130,1000131,1000106,1000132,1000092,1000001,1000133,1000134,1000135,1000136,1000137,1000138,1000139,1000140,1000141,1000142,1000143,1000144,1000145,1000146,1000147,1000148,1000138,1000139,1000149,1000141,1000150,1000151,1000152,1000153,1000154,1000155,1000147,1000148,1000138,1000139,1000156,1000141,1000157,1000158,1000159,1000145,1000160,1000152,1000153,1000154,1000161,1000162,1000155,1000147,1000106,1000163,1000164,1000165,1000166,1000167,1000168,1000169,1000170,1000171,1000169,1000147,1000106,1000132,1000092,1000001,1000172,1000134,1000135,1000173,1000174,1000165,1000175,1000176,1000177,1000147,1000106,1000132,1000092,1000001,1000178,1000134,1000135,1000179,1000180,1000138,1000139,1000181,1000141,1000150,1000182,1000183,1000184,1000185,1000155,1000147,1000148,1000138,1000139,1000186,1000141,1000150,1000187,1000188,1000189,1000155,1000147,1000148,1000138,1000139,1000190,1000141,1000142,1000143,1000191,1000145,1000146,1000147,1000148,1000138,1000139,1000192,1000141,1000193,1000194,1000195,1000196,1000197,1000198,1000199,1000130,1000147,1000106,1000132,1000092,1000200,1000201,1000019,1000001]}],"gitInfo":{"noRepoFound":true},"kind":"KIND_ADDED"}