{"fsPath":"/home/a0928997578_gmail_com/偉大/admin/src/components/WalletManagement.tsx","fileUuid":"e68d6391-fc1f-474e-87e4-a2727fcc7502","fileSizeBytes":11041,"numLines":322,"diffChanges":[{"originalStartLineNumberOneIndexed":1,"originalEndLineNumberExclusiveOneIndexed":1,"modifiedStartLineNumberOneIndexed":1,"modifiedEndLineNumberExclusiveOneIndexed":323,"addedLines":["'use client';","","import { useState } from 'react';","import { ","  WalletIcon, ","  PlusIcon, ","  ArrowPathIcon,","  EyeIcon,","  EyeSlashIcon,","  QrCodeIcon,","  ClipboardDocumentIcon","} from '@heroicons/react/24/outline';","import { formatCurrency } from '@/lib/utils';","","interface Wallet {","  id: string;","  name: string;","  address: string;","  type: 'hot' | 'cold' | 'commission';","  balance: number;","  currency: string;","  isActive: boolean;","  lastSync: Date;","}","","const mockWallets: Wallet[] = [","  {","    id: '1',","    name: '熱錢包',","    address: 'TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t',","    type: 'hot',","    balance: 1250.50,","    currency: 'USDT',","    isActive: true,","    lastSync: new Date(),","  },","  {","    id: '2',","    name: '冷錢包',","    address: 'TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t',","    type: 'cold',","    balance: 5000.00,","    currency: 'USDT',","    isActive: true,","    lastSync: new Date(Date.now() - 86400000), // 1天前","  },","  {","    id: '3',","    name: '佣金錢包',","    address: 'TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t',","    type: 'commission',","    balance: 750.25,","    currency: 'USDT',","    isActive: true,","    lastSync: new Date(),","  },","];","","export default function WalletManagement() {","  const [wallets, setWallets] = useState<Wallet[]>(mockWallets);","  const [showAddresses, setShowAddresses] = useState<Record<string, boolean>>({});","  const [isAddingWallet, setIsAddingWallet] = useState(false);","","  const toggleAddressVisibility = (walletId: string) => {","    setShowAddresses(prev => ({","      ...prev,","      [walletId]: !prev[walletId]","    }));","  };","","  const copyToClipboard = async (text: string) => {","    try {","      await navigator.clipboard.writeText(text);","      // 這裡可以添加一個 toast 通知","      console.log('地址已複製到剪貼板');","    } catch (err) {","      console.error('複製失敗:', err);","    }","  };","","  const getWalletTypeColor = (type: string) => {","    switch (type) {","      case 'hot': return 'bg-red-100 text-red-800';","      case 'cold': return 'bg-blue-100 text-blue-800';","      case 'commission': return 'bg-green-100 text-green-800';","      default: return 'bg-gray-100 text-gray-800';","    }","  };","","  const getWalletTypeName = (type: string) => {","    switch (type) {","      case 'hot': return '熱錢包';","      case 'cold': return '冷錢包';","      case 'commission': return '佣金錢包';","      default: return '未知';","    }","  };","","  const syncWallet = async (walletId: string) => {","    // 這裡應該調用 API 同步錢包餘額","    console.log('同步錢包:', walletId);","    // 模擬同步過程","    const updatedWallets = wallets.map(wallet => ","      wallet.id === walletId ","        ? { ...wallet, lastSync: new Date() }","        : wallet","    );","    setWallets(updatedWallets);","  };","","  const totalBalance = wallets.reduce((sum, wallet) => sum + wallet.balance, 0);","","  return (","    <div className=\"space-y-6\">","      {/* 頁面標題 */}","      <div>","        <h1 className=\"text-2xl font-bold text-gray-900\">錢包管理</h1>","        <p className=\"mt-2 text-sm text-gray-600\">","          管理系統錢包、監控餘額和同步區塊鏈數據","        </p>","      </div>","","      {/* 總餘額卡片 */}","      <div className=\"bg-white overflow-hidden shadow rounded-lg\">","        <div className=\"p-6\">","          <div className=\"flex items-center\">","            <div className=\"flex-shrink-0\">","              <div className=\"p-3 rounded-md bg-green-500\">","                <WalletIcon className=\"h-8 w-8 text-white\" />","              </div>","            </div>","            <div className=\"ml-5 w-0 flex-1\">","              <dl>","                <dt className=\"text-lg font-medium text-gray-500 truncate\">","                  總錢包餘額","                </dt>","                <dd className=\"text-3xl font-bold text-gray-900\">","                  {formatCurrency(totalBalance, 'USD')}","                </dd>","                <dd className=\"text-sm text-gray-500\">","                  {wallets.length} 個錢包 • 最後同步: {new Date().toLocaleString()}","                </dd>","              </dl>","            </div>","          </div>","        </div>","      </div>","","      {/* 錢包列表 */}","      <div className=\"bg-white shadow rounded-lg\">","        <div className=\"px-4 py-5 sm:p-6\">","          <div className=\"flex items-center justify-between mb-4\">","            <h3 className=\"text-lg font-medium text-gray-900\">錢包列表</h3>","            <button","              onClick={() => setIsAddingWallet(true)}","              className=\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 transition-colors\"","            >","              <PlusIcon className=\"h-4 w-4 mr-2\" />","              新增錢包","            </button>","          </div>","","          <div className=\"space-y-4\">","            {wallets.map((wallet) => (","              <div key={wallet.id} className=\"border border-gray-200 rounded-lg p-4\">","                <div className=\"flex items-center justify-between\">","                  <div className=\"flex items-center space-x-4\">","                    <div className={`p-2 rounded-md ${getWalletTypeColor(wallet.type)}`}>","                      <WalletIcon className=\"h-5 w-5\" />","                    </div>","                    <div>","                      <h4 className=\"text-sm font-medium text-gray-900\">{wallet.name}</h4>","                      <p className=\"text-xs text-gray-500\">{getWalletTypeName(wallet.type)}</p>","                    </div>","                  </div>","                  ","                  <div className=\"text-right\">","                    <p className=\"text-lg font-medium text-gray-900\">","                      {formatCurrency(wallet.balance, wallet.currency)}","                    </p>","                    <p className=\"text-xs text-gray-500\">","                      最後同步: {wallet.lastSync.toLocaleString()}","                    </p>","                  </div>","                </div>","","                <div className=\"mt-4 flex items-center justify-between\">","                  <div className=\"flex items-center space-x-2\">","                    <span className=\"text-sm text-gray-500\">地址:</span>","                    <span className=\"text-sm font-mono text-gray-900\">","                      {showAddresses[wallet.id] ","                        ? wallet.address ","                        : `${wallet.address.slice(0, 8)}...${wallet.address.slice(-8)}`","                      }","                    </span>","                    <button","                      onClick={() => toggleAddressVisibility(wallet.id)}","                      className=\"text-gray-400 hover:text-gray-600\"","                    >","                      {showAddresses[wallet.id] ? (","                        <EyeSlashIcon className=\"h-4 w-4\" />","                      ) : (","                        <EyeIcon className=\"h-4 w-4\" />","                      )}","                    </button>","                    <button","                      onClick={() => copyToClipboard(wallet.address)}","                      className=\"text-gray-400 hover:text-gray-600\"","                      title=\"複製地址\"","                    >","                      <ClipboardDocumentIcon className=\"h-4 w-4\" />","                    </button>","                    <button","                      className=\"text-gray-400 hover:text-gray-600\"","                      title=\"顯示 QR 碼\"","                    >","                      <QrCodeIcon className=\"h-4 w-4\" />","                    </button>","                  </div>","","                  <div className=\"flex items-center space-x-2\">","                    <button","                      onClick={() => syncWallet(wallet.id)}","                      className=\"inline-flex items-center px-3 py-1 border border-gray-300 text-xs font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 transition-colors\"","                    >","                      <ArrowPathIcon className=\"h-3 w-3 mr-1\" />","                      同步","                    </button>","                    <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${","                      wallet.isActive ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'","                    }`}>","                      {wallet.isActive ? '活躍' : '非活躍'}","                    </span>","                  </div>","                </div>","              </div>","            ))}","          </div>","        </div>","      </div>","","      {/* 錢包統計 */}","      <div className=\"grid grid-cols-1 gap-5 sm:grid-cols-3\">","        <div className=\"bg-white overflow-hidden shadow rounded-lg\">","          <div className=\"p-5\">","            <div className=\"flex items-center\">","              <div className=\"flex-shrink-0\">","                <div className=\"p-3 rounded-md bg-red-500\">","                  <WalletIcon className=\"h-6 w-6 text-white\" />","                </div>","              </div>","              <div className=\"ml-5 w-0 flex-1\">","                <dl>","                  <dt className=\"text-sm font-medium text-gray-500 truncate\">","                    熱錢包餘額","                  </dt>","                  <dd className=\"text-lg font-medium text-gray-900\">","                    {formatCurrency(","                      wallets.filter(w => w.type === 'hot').reduce((sum, w) => sum + w.balance, 0),","                      'USD'","                    )}","                  </dd>","                </dl>","              </div>","            </div>","          </div>","        </div>","","        <div className=\"bg-white overflow-hidden shadow rounded-lg\">","          <div className=\"p-5\">","            <div className=\"flex items-center\">","              <div className=\"flex-shrink-0\">","                <div className=\"p-3 rounded-md bg-blue-500\">","                  <WalletIcon className=\"h-6 w-6 text-white\" />","                </div>","              </div>","              <div className=\"ml-5 w-0 flex-1\">","                <dl>","                  <dt className=\"text-sm font-medium text-gray-500 truncate\">","                    冷錢包餘額","                  </dt>","                  <dd className=\"text-lg font-medium text-gray-900\">","                    {formatCurrency(","                      wallets.filter(w => w.type === 'cold').reduce((sum, w) => sum + w.balance, 0),","                      'USD'","                    )}","                  </dd>","                </dl>","              </div>","            </div>","          </div>","        </div>","","        <div className=\"bg-white overflow-hidden shadow rounded-lg\">","          <div className=\"p-5\">","            <div className=\"flex items-center\">","              <div className=\"flex-shrink-0\">","                <div className=\"p-3 rounded-md bg-green-500\">","                  <WalletIcon className=\"h-6 w-6 text-white\" />","                </div>","              </div>","              <div className=\"ml-5 w-0 flex-1\">","                <dl>","                  <dt className=\"text-sm font-medium text-gray-500 truncate\">","                    佣金錢包餘額","                  </dt>","                  <dd className=\"text-lg font-medium text-gray-900\">","                    {formatCurrency(","                      wallets.filter(w => w.type === 'commission').reduce((sum, w) => sum + w.balance, 0),","                      'USD'","                    )}","                  </dd>","                </dl>","              </div>","            </div>","          </div>","        </div>","      </div>","    </div>","  );","}",""],"tokenizedAddedLines":[1000000,1000001,1000002,1000003,1000004,1000005,1000006,1000007,1000008,1000009,1000010,1000011,1000012,1000001,1000013,1000014,1000015,1000016,1000017,1000018,1000019,1000020,1000021,1000022,1000001,1000023,1000024,1000025,1000026,1000027,1000028,1000029,1000030,1000031,1000032,1000033,1000024,1000034,1000035,1000027,1000036,1000037,1000030,1000031,1000038,1000033,1000024,1000039,1000040,1000027,1000041,1000042,1000030,1000031,1000032,1000033,1000043,1000001,1000044,1000045,1000046,1000047,1000001,1000048,1000049,1000050,1000051,1000052,1000053,1000001,1000054,1000055,1000056,1000057,1000058,1000059,1000060,1000061,1000053,1000001,1000062,1000063,1000064,1000065,1000066,1000067,1000061,1000053,1000001,1000068,1000063,1000069,1000070,1000071,1000072,1000061,1000053,1000001,1000073,1000074,1000075,1000076,1000077,1000078,1000079,1000080,1000081,1000082,1000053,1000001,1000083,1000001,1000084,1000085,1000086,1000087,1000088,1000089,1000090,1000091,1000092,1000001,1000093,1000094,1000095,1000096,1000097,1000098,1000099,1000100,1000101,1000102,1000103,1000104,1000105,1000106,1000107,1000108,1000109,1000110,1000111,1000109,1000112,1000101,1000113,1000114,1000092,1000001,1000115,1000116,1000117,1000118,1000119,1000120,1000121,1000122,1000123,1000124,1000125,1000126,1000113,1000001,1000127,1000128,1000129,1000130,1000131,1000132,1000133,1000134,1000135,1000136,1000137,1000134,1000138,1000139,1000140,1000141,1000142,1000143,1000144,1000145,1000143,1000138,1000146,1000001,1000147,1000148,1000149,1000150,1000151,1000152,1000153,1000154,1000155,1000156,1000157,1000158,1000159,1000160,1000161,1000162,1000163,1000164,1000165,1000156,1000166,1000158,1000167,1000159,1000168,1000165,1000156,1000158,1000169,1000159,1000170,1000165,1000138,1000001,1000148,1000156,1000171,1000172,1000159,1000173,1000174,1000165,1000175,1000176,1000177,1000178,1000155,1000138,1000146,1000100,1000179,1000113,1000114,1000092,1000001,1000180,1000181,1000182,1000183,1000184,1000185,1000186,1000187,1000146,1000100,1000188,1000189,1000190,1000191,1000192,1000193,1000194,1000195,1000196,1000197,1000198,1000199,1000100,1000101,1000113,1000114,1000001,1000182,1000183,1000184,1000185,1000200,1000187,1000146,1000100,1000188,1000189,1000190,1000201,1000192,1000193,1000194,1000202,1000196,1000197,1000198,1000199,1000100,1000101,1000113,1000114,1000001,1000182,1000183,1000184,1000185,1000203,1000187,1000146,1000100,1000188,1000189,1000190,1000204,1000192,1000193,1000194,1000205,1000196,1000197,1000198,1000199,1000100,1000101,1000113,1000114,1000092,1000206,1000207,1000022,1000001]}],"gitInfo":{"noRepoFound":true},"kind":"KIND_ADDED"}