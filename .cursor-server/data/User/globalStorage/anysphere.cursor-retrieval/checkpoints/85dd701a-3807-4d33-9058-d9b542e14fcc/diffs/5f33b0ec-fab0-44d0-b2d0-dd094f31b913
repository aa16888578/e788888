{"fsPath":"/home/a0928997578_gmail_com/偉大/admin/ENVIRONMENT_SETUP.md","fileUuid":"5f33b0ec-fab0-44d0-b2d0-dd094f31b913","fileSizeBytes":3220,"numLines":188,"diffChanges":[{"originalStartLineNumberOneIndexed":1,"originalEndLineNumberExclusiveOneIndexed":10,"modifiedStartLineNumberOneIndexed":1,"modifiedEndLineNumberExclusiveOneIndexed":14,"addedLines":["# 🔐 環境變數設置指南","","## ⚠️ **重要安全提醒**","","**環境變數文件包含敏感信息，絕對不要提交到 Git 倉庫！**","","- ✅ 可以提交：`env.example`、`env.local.example`","- ❌ 絕對不要提交：`.env`、`.env.local`、`.env.production`","","## 🚀 快速設置","","### 1. 複製環境變數範例文件",""],"tokenizedAddedLines":[1000138,2,1000139,2,1000140,2,1000141,1000142,2,1000143,2,1000144,2]},{"originalStartLineNumberOneIndexed":11,"originalEndLineNumberExclusiveOneIndexed":13,"modifiedStartLineNumberOneIndexed":15,"modifiedEndLineNumberExclusiveOneIndexed":17,"addedLines":["# 在 admin 目錄下執行","cp env.local.example .env.local"],"tokenizedAddedLines":[1000145,1000146]},{"originalStartLineNumberOneIndexed":16,"originalEndLineNumberExclusiveOneIndexed":19,"modifiedStartLineNumberOneIndexed":20,"modifiedEndLineNumberExclusiveOneIndexed":20},{"originalStartLineNumberOneIndexed":20,"originalEndLineNumberExclusiveOneIndexed":21,"modifiedStartLineNumberOneIndexed":21,"modifiedEndLineNumberExclusiveOneIndexed":21},{"originalStartLineNumberOneIndexed":22,"originalEndLineNumberExclusiveOneIndexed":46,"modifiedStartLineNumberOneIndexed":22,"modifiedEndLineNumberExclusiveOneIndexed":47,"addedLines":["# 使用您喜歡的編輯器","nano .env.local","# 或","code .env.local","```","","### 3. 填入您的實際配置","","```env","# Firebase 配置","NEXT_PUBLIC_FIREBASE_API_KEY=your_actual_api_key_here","NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN=your_actual_project.firebaseapp.com","NEXT_PUBLIC_FIREBASE_PROJECT_ID=your_actual_project_id","NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET=your_actual_project.appspot.com","NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID=123456789","NEXT_PUBLIC_FIREBASE_APP_ID=your_actual_app_id","","# Telegram Bot 配置","NEXT_PUBLIC_TELEGRAM_BOT_TOKEN=your_actual_bot_token","NEXT_PUBLIC_TELEGRAM_BOT_USERNAME=your_actual_bot_username","","# 應用配置","NEXT_PUBLIC_APP_NAME=ShopBot Admin","NEXT_PUBLIC_APP_VERSION=1.0.0","NEXT_PUBLIC_APP_ENV=development"],"tokenizedAddedLines":[1000147,98,1000148,1000149,10,2,1000150,2,1000151,1000152,1000153,1000154,1000155,1000156,1000157,1000158,2,1000159,1000160,1000161,2,1000162,1000163,1000164,1000165]},{"originalStartLineNumberOneIndexed":49,"originalEndLineNumberExclusiveOneIndexed":62,"modifiedStartLineNumberOneIndexed":50,"modifiedEndLineNumberExclusiveOneIndexed":50},{"originalStartLineNumberOneIndexed":64,"originalEndLineNumberExclusiveOneIndexed":128,"modifiedStartLineNumberOneIndexed":52,"modifiedEndLineNumberExclusiveOneIndexed":81,"addedLines":["","1. **獲取 Firebase 配置**","   - 登入 [Firebase Console](https://console.firebase.google.com/)","   - 選擇您的項目","   - 點擊項目設置（齒輪圖標）","   - 在「一般」標籤下找到「您的應用程式」部分","   - 複製配置對象中的值","","2. **API 金鑰安全**","   - Firebase API 金鑰是公開的，但應該限制使用範圍","   - 在 Firebase Console 中設置 API 金鑰限制","   - 限制只能從您的域名調用","","### Telegram Bot 配置","","1. **創建 Bot**","   - 在 Telegram 中與 [@BotFather](https://t.me/botfather) 對話","   - 發送 `/newbot` 命令","   - 按照指示設置 Bot 名稱和用戶名","   - 複製 Bot Token","","2. **設置 Webhook**","   - 部署後設置 webhook 到您的 Firebase Functions","   - 確保 webhook 安全","","## 🛡️ 安全最佳實踐","","### 1. 環境變數管理",""],"tokenizedAddedLines":[2,1000166,1000167,1000168,1000169,1000170,1000171,2,1000172,1000173,1000174,1000175,2,1000176,2,1000177,1000178,1000179,1000180,1000181,2,1000182,1000183,1000184,2,1000185,2,1000186,2]},{"originalStartLineNumberOneIndexed":129,"originalEndLineNumberExclusiveOneIndexed":145,"modifiedStartLineNumberOneIndexed":82,"modifiedEndLineNumberExclusiveOneIndexed":93,"addedLines":["# 正確的做法","cp env.local.example .env.local","# 編輯 .env.local 填入實際值","","# 錯誤的做法 - 絕對不要這樣做！","git add .env.local","git commit -m \"Add environment variables\"","```","","### 2. 生產環境",""],"tokenizedAddedLines":[1000187,1000146,1000188,2,1000189,1000190,1000191,10,2,1000192,2]},{"originalStartLineNumberOneIndexed":146,"originalEndLineNumberExclusiveOneIndexed":157,"modifiedStartLineNumberOneIndexed":94,"modifiedEndLineNumberExclusiveOneIndexed":101,"addedLines":["# 生產環境使用不同的文件","cp env.local.example .env.production","# 編輯 .env.production 填入生產環境配置","```","","### 3. 團隊協作",""],"tokenizedAddedLines":[1000193,1000194,1000195,10,2,1000196,2]},{"originalStartLineNumberOneIndexed":158,"originalEndLineNumberExclusiveOneIndexed":167,"modifiedStartLineNumberOneIndexed":102,"modifiedEndLineNumberExclusiveOneIndexed":105,"addedLines":["# 每個開發者都有自己的 .env.local","# 不要共享包含真實 API 金鑰的文件","# 只共享 env.example 範例文件"],"tokenizedAddedLines":[1000197,1000198,1000199]},{"originalStartLineNumberOneIndexed":173,"originalEndLineNumberExclusiveOneIndexed":174,"modifiedStartLineNumberOneIndexed":111,"modifiedEndLineNumberExclusiveOneIndexed":129,"addedLines":["1. **環境變數未生效**","   ```bash","   # 重新啟動開發服務器","   npm run dev","   ```","","2. **Firebase 連接失敗**","   - 檢查 API 金鑰是否正確","   - 確認項目 ID 是否匹配","   - 檢查 Firebase 項目是否啟用","","3. **Telegram Bot 無響應**","   - 檢查 Bot Token 是否正確","   - 確認 Bot 是否已啟動","   - 檢查 webhook 設置","","### 調試技巧",""],"tokenizedAddedLines":[1000200,1000201,1000202,1000203,1000204,2,1000205,1000206,1000207,1000208,2,1000209,1000210,1000211,1000212,2,1000213,2]},{"originalStartLineNumberOneIndexed":175,"originalEndLineNumberExclusiveOneIndexed":196,"modifiedStartLineNumberOneIndexed":130,"modifiedEndLineNumberExclusiveOneIndexed":161,"addedLines":["# 檢查環境變數是否正確載入","console.log('Firebase Config:', {","  apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,","  projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,","});","","# 在瀏覽器控制台中查看","# 注意：只有 NEXT_PUBLIC_ 開頭的變數會在客戶端可見","```","","## 📁 文件結構","","```","偉大/admin/","├── .env.local              # 本地環境變數 (不要提交到 Git)","├── .env.production         # 生產環境變數 (不要提交到 Git)","├── env.local.example       # 本地環境變數範例 (可以提交到 Git)","├── env.example             # 環境變數範例 (可以提交到 Git)","└── .gitignore              # Git 忽略文件 (保護敏感信息)","```","","## 🚨 緊急情況","","如果您意外提交了環境變數文件：","","1. **立即撤銷提交**","   ```bash","   git reset --soft HEAD~1","   ```","","2. **從 Git 歷史中移除**"],"tokenizedAddedLines":[1000214,1000215,1000216,1000217,1000218,2,1000219,1000220,10,2,1000221,2,10,1000222,1000223,1000224,1000225,1000226,1000227,10,2,1000228,2,1000229,2,1000230,1000201,1000231,1000204,2,1000232]},{"originalStartLineNumberOneIndexed":197,"originalEndLineNumberExclusiveOneIndexed":221,"modifiedStartLineNumberOneIndexed":162,"modifiedEndLineNumberExclusiveOneIndexed":188,"addedLines":["   git filter-branch --force --index-filter \\","     'git rm --cached --ignore-unmatch .env.local' \\","     --prune-empty --tag-name-filter cat -- --all","   ```","","3. **強制推送**","   ```bash","   git push origin --force","   ```","","4. **立即更換 API 金鑰**","   - 在 Firebase Console 中重新生成 API 金鑰","   - 在 Telegram BotFather 中重新生成 Bot Token","","## 📞 需要幫助？","","如果您在設置環境變數時遇到問題：","","1. 檢查本文件中的配置說明","2. 確認所有必需的值都已填入","3. 重新啟動開發服務器","4. 檢查瀏覽器控制台的錯誤信息","","---","","**記住：安全第一！永遠不要將包含真實 API 金鑰的文件提交到 Git 倉庫。**"],"tokenizedAddedLines":[1000233,1000234,1000235,1000204,2,1000236,1000201,1000237,1000204,2,1000238,1000239,1000240,2,1000241,2,1000242,2,1000243,1000244,1000245,1000246,2,137,2,1000247]}],"gitInfo":{"noRepoFound":true},"kind":"KIND_MODIFIED"}