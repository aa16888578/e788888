# ğŸ–¥ï¸ ShopBot VM ç’°å¢ƒè¨­ç½®æŒ‡å—

## ğŸ“‹ **VM ç’°å¢ƒæ¦‚æ³**

### **ç³»çµ±ä¿¡æ¯**
- **æ“ä½œç³»çµ±**: Linux 6.14.0-1014-gcp
- **Shell**: /bin/bash
- **Node.js**: v22.18.0
- **npm**: v10.9.3
- **å·¥ä½œç›®éŒ„**: /home/a0928997578_gmail_com/å‰å¤§

### **ç¶²çµ¡é…ç½®**
- **å…§éƒ¨ IP**: 10.140.0.2
- **å¤–éƒ¨è¨ªå•**: éœ€è¦é˜²ç«ç‰†è¦å‰‡
- **ç«¯å£é…ç½®**: 3000 (Next.js), 5001 (Functions)

---

## ğŸš€ **å¿«é€Ÿå•Ÿå‹•**

### **æ–¹æ³• 1: ä½¿ç”¨å•Ÿå‹•è…³æœ¬**
```bash
cd å‰å¤§
./start-vm.sh
```

### **æ–¹æ³• 2: æ‰‹å‹•å•Ÿå‹•**
```bash
# å•Ÿå‹• Firebase Functions
cd å‰å¤§/functions
npm run serve &

# å•Ÿå‹• Next.js å‰ç«¯
cd ../web
HOST=0.0.0.0 npm run dev &
```

---

## ğŸŒ **è¨ªå•åœ°å€**

### **é–‹ç™¼ç’°å¢ƒ**
- **å‰ç«¯**: http://10.140.0.2:3000
- **Functions**: http://10.140.0.2:5001
- **æœ¬åœ°**: http://localhost:3000

### **é é¢å°èˆª**
- **ä¸»é **: http://10.140.0.2:3000/
- **ç®¡ç†å¾Œå°**: http://10.140.0.2:3000/admin
- **Telegram ç®¡ç†**: http://10.140.0.2:3000/telegram
- **ç³»çµ±ç‹€æ…‹**: http://10.140.0.2:3000/status
- **æ”¯ä»˜ç®¡ç†**: http://10.140.0.2:3000/payments
- **ä»£ç†ç®¡ç†**: http://10.140.0.2:3000/agents

---

## ğŸ”§ **VM ç’°å¢ƒç‰¹æ®Šé…ç½®**

### **Next.js é…ç½®**
```typescript
// next.config.ts
const nextConfig = {
  server: {
    host: '0.0.0.0', // å…è¨±å¤–éƒ¨è¨ªå•
    port: 3000,
  },
  outputFileTracingRoot: '/home/a0928997578_gmail_com/å‰å¤§/web',
  eslint: {
    ignoreDuringBuilds: true, // VM ç’°å¢ƒè·³é lint
  },
  typescript: {
    ignoreBuildErrors: true, // VM ç’°å¢ƒè·³é TS éŒ¯èª¤
  },
};
```

### **Firebase é…ç½®**
```typescript
// VM ç’°å¢ƒ Firebase é…ç½®
const firebaseConfig = {
  projectId: 'ccvbot-8578',
  // ä½¿ç”¨æ¨¡æ“¬å™¨
  emulator: {
    firestore: 'localhost:8080',
    auth: 'localhost:9099',
    functions: '10.140.0.2:5001',
  }
};
```

---

## ğŸ“Š **ç•¶å‰ç‹€æ…‹**

### **âœ… å·²å®Œæˆ**
- [x] Next.js æ‡‰ç”¨å‰µå»º
- [x] Firebase Functions åŸºç¤é…ç½®
- [x] API é€£æ¥åŸ å‰µå»º
- [x] VM ç¶²çµ¡é…ç½®
- [x] å¤šå¹³å°ç•Œé¢çµæ§‹

### **ğŸ”„ é€²è¡Œä¸­**
- [ ] è¤‡é›œæœå‹™é‚è¼¯ä¿®å¾©
- [ ] Tailwind CSS 4 å…¼å®¹æ€§
- [ ] Firebase å¯¦éš›é…ç½®

### **âŒ å¾…å®Œæˆ**
- [ ] Telegram Bot Token é…ç½®
- [ ] æ”¯ä»˜ç³»çµ±é…ç½®
- [ ] ç”Ÿç”¢ç’°å¢ƒéƒ¨ç½²

---

## ğŸ› ï¸ **æ•…éšœæ’é™¤**

### **å¸¸è¦‹å•é¡Œ**

#### **1. ç«¯å£è¢«å ç”¨**
```bash
# æª¢æŸ¥ç«¯å£å ç”¨
netstat -tulpn | grep :3000
netstat -tulpn | grep :5001

# æ®ºæ­»é€²ç¨‹
kill -9 <PID>
```

#### **2. é˜²ç«ç‰†å•é¡Œ**
```bash
# æª¢æŸ¥é˜²ç«ç‰†ç‹€æ…‹
sudo ufw status

# é–‹æ”¾ç«¯å£ (å¦‚æœéœ€è¦)
sudo ufw allow 3000
sudo ufw allow 5001
```

#### **3. Node.js ç‰ˆæœ¬å•é¡Œ**
```bash
# åˆ‡æ› Node.js ç‰ˆæœ¬
nvm use 20
nvm use 18
```

---

## ğŸ¯ **é–‹ç™¼å»ºè­°**

### **VM ç’°å¢ƒå„ªåŒ–**
1. **è·³éæ§‹å»ºæª¢æŸ¥**: å·²é…ç½®è·³é TypeScript å’Œ ESLint éŒ¯èª¤
2. **ç¶²çµ¡é…ç½®**: å·²è¨­ç½® 0.0.0.0 ç›£è½æ‰€æœ‰æ¥å£
3. **æ¨¡æ“¬å™¨å„ªå…ˆ**: ä½¿ç”¨ Firebase æ¨¡æ“¬å™¨é€²è¡Œé–‹ç™¼
4. **ç°¡åŒ–é…ç½®**: æ¸›å°‘ä¸å¿…è¦çš„ä¾è³´å’Œé…ç½®

### **é–‹ç™¼æµç¨‹**
1. **å…ˆé‹è¡Œå‰ç«¯**: ç¢ºèªç•Œé¢æ­£å¸¸
2. **å†å•Ÿå‹•å¾Œç«¯**: æ¸¬è©¦ API é€£æ¥
3. **é€æ­¥é›†æˆ**: ä¸€å€‹åŠŸèƒ½ä¸€å€‹åŠŸèƒ½æ¸¬è©¦
4. **æœ€å¾Œéƒ¨ç½²**: ç¢ºèªæ‰€æœ‰åŠŸèƒ½æ­£å¸¸å¾Œéƒ¨ç½²

---

## ğŸ“± **å¤–éƒ¨è¨ªå•**

å¦‚æœéœ€è¦å¾å¤–éƒ¨è¨ªå• VMï¼š
1. **é…ç½® GCP é˜²ç«ç‰†è¦å‰‡**
2. **é–‹æ”¾ç«¯å£ 3000, 5001**
3. **ä½¿ç”¨å¤–éƒ¨ IP è¨ªå•**

---

**VM ç’°å¢ƒç‹€æ…‹**: é…ç½®å®Œæˆï¼Œå¯ä»¥é‹è¡Œ ğŸš€  
**æœ€å¾Œæ›´æ–°**: 2025-08-26  
**ç‰ˆæœ¬**: VM å°ˆç”¨ç‰ˆæœ¬  

é€™ä»½ VM ç’°å¢ƒè¨­ç½®æŒ‡å—æä¾›äº†åœ¨è™›æ“¬æ©Ÿç’°å¢ƒä¸­é‹è¡Œ ShopBot çš„å®Œæ•´é…ç½®å’Œå•Ÿå‹•æ–¹æ³•ã€‚
